# TODO: This Dockerfile is ready but not yet active in Prow CI

FROM quay.io/redhat-services-prod/openshift/boilerplate:image-v8.3.1

ENV OPERATOR_PATH=/go/src/github.com/openshift/aws-account-operator
ENV GO111MODULE=on
ENV GOFLAGS=""

RUN curl -sfL "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o /tmp/awscliv2.zip && \
    unzip -qq /tmp/awscliv2.zip -d /tmp && \
    /tmp/aws/install && \
    rm -rf /tmp/aws* /tmp/awscliv2.zip

RUN curl -sfL https://github.com/stedolan/jq/releases/download/jq-1.6/jq-linux64 -o /usr/local/bin/jq && \
    chmod +x /usr/local/bin/jq

RUN aws --version && jq --version

COPY . ${OPERATOR_PATH}
WORKDIR ${OPERATOR_PATH}
